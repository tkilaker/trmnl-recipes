{% comment %}
Sydsvenskan News - Quadrant Layout
Minimal quarter-screen display
{% endcomment %}

{% comment %} View config {% endcomment %}
{% assign max_height = 200 %}
{% assign show_elapsed = false %}
{% assign show_more_label = false %}

{% comment %} Get configuration - max 4 items for quadrant {% endcomment %}
{% assign news_limit = 4 %}
{% assign latest_feed = data[0] %}
{% assign now_date = 'now' | date: '%s' %}

<div class="view view--quadrant">
  <div class="layout">
    <div class="list gap" data-list-limit="true" data-list-max-height="{{ max_height }}" data-list-hidden-count="{{ show_more_label }}">
      {% if latest_feed.channel.item %}
        {% assign items = latest_feed.channel.item | slice: 0, news_limit %}
        {% for item in items %}
          {% liquid
          if show_elapsed
            assign pub_date_timestamp = item.pubDate | date: '%s'
            assign elapsed = pub_date_timestamp | minus: now_date | abs | plus: 300
            if elapsed > 86400
              assign elapsed_str = elapsed | divided_by: 86400.0 | round: 1 | replace_last: '.0', '' | append: 'd'
            elsif elapsed > 3600
              assign elapsed_str = elapsed | divided_by: 3600 | append: 'h'
            else
              assign elapsed_str = elapsed | divided_by: 60 | append: 'm'
            endif
          endif
          %}
          <div class="item gap--small">
            <div class="meta">
              <span class="index"></span>
            </div>
            <div class="content stretch">
              <div class="flex gap--xsmall">
                <span class="title title--small truncate-none">{{ item.title | strip_html }}</span>
              </div>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <div class="text--sm text--gray-3">Inga nyheter</div>
      {% endif %}
    </div>
  </div>
  <div class="title_bar">
    <span class="title">Sydsvenskan</span>
  </div>
</div>
